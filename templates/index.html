{% extends 'base.html' %}

{% block head %}
<title>MIXOLOGIST</title>
{% endblock %}

{% block body %}
<div class="content">
    <h1>MIXOLOGIST</h1>
    <h2> Create your own drinks!!</h2>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class = "{{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form action ='/' method = 'post'>
        <label for="name">Drink Name: </label>
        <input type ="text" name ="name" required>
        <br><br>

        <label> Ingredients:</label>
        <div id ='ingredients-list'>
            <input type ='text' name="'ingredients" required>
        </div>

        <button type="button" onclick="addIngredient()"> Add Ingredients</button>
        <br><br>

        <button type="submit"> Create Drink</button>
    </form>
    
    <h2> Previous Drinks:</h2>
    <ul>
        {% for drink in drinks %}
            <li><strong>{{ drink.name }}</strong>: {{drink.get_ingredients() | join(', ') }}</li>
        {% endfor %}
    </ul>
</div>

<script>
    function addIngredient() {
        let list = document.getElementById('ingredient-list');
        let inputs = list.GetElementsByTagName('input');

        if (inputs.length >= 50) {
            alert("Stop. You can't add more than 50 ingredients!");
            return;
        }

        let newInput = document.createElement('input');
        newInput.type = 'text';
        newInput.name = 'ingredients';
        list.appendChild(newInput);       
    }
</script>
{% endblock %}


