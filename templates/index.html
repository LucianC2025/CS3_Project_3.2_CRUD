{% extends 'base.html' %}

{% block head %}
<title>MIXOLOGIST</title>
{% endblock %}

{% block body %}
<div class="content">
    <h1>MIXOLOGIST</h1>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class = "{{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}


    <div class ="form-container">
        <form action ="/" method ='POST'>
        <h3> Enter the name of your drink</h3>
            <label for="name"> Drink Name: </label>
            <input type ="text" name ="name" id="name" required>
                <br>
        <h3> Enter all the ingredients</h3>
            <label> Ingredients: </label>
            <div id="ingredient_list">
                <input type="text" id="ingredient_input"
                <button type="button" onclick="addIngredient()"> Add Ingredient</button>
                <!-- Hide the input, but store the ingredient list-->
                <input type="hidden" name ="ingredients" id="ingredients-hidden-list">
                <ul id="ingredient_list"></ul>
                <br><br>
            </div>
            <button type="submit"> Create Drink</button>
        </form>
    </div>

    <h2> Previous Drinks: </h2>
    {% if drinks %}
        <ul>
             {% for drink in drinks %}
                <li>
                    <strong> {{ drink.name }}</strong>
                    <ul>
                        {% for ingredient in drink.get_ingredients() %}
                            <li> {{ ingredient }}</li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p> No drinks created yet. Start mixing!</p>
    {% endif %}
</div>

<!-- JAVASCRIPT -->   
<script>
    let ingredients = [];

    document.GetElementById("add-ingredient-btn").addEventListener("click", function() {
        let input = document.getElementById('ingredient_input');
        let ingredient = ingredient_input.value.trim();

        if (ingredient) {
            // Store the ingredient as a full word
            ingredient_list.push(ingredient)
            updateIngredientDisplay();
            // Clear the input box thing
            ingredient_input.value ="";
        }
    });

    function updateIngredientDisplay {
        
    }
    }
    
       

        if (ingredient == "") {
            alert("Please enter an ingredient")
            return;
        }

        if (inputs.length >= 50) {
            alert("Stop. You can't add more than 50 ingredients!");
            return;
        }
        // NOTE: You can add objects to arrays with simple actions like: .push() (to add at the end), .unshift() (to add at the beginning), and .splice() (to add somewhere in the middle).

        // Add the ingredient to the end of the ingredients list
        ingredients.push(ingredients)
        // CLEAR THE INPUT FIELD (BOX THING)
        input.value="";
        // Update the ingredient-hidden-list

        // NOTE: JSON.stringify can  convert any JavaScript datatype into a string with JSON.stringify()
        document.getElementById("ingredients-hidden-list").value =JSON.stringify(ingredients);

        let list = document.getElementById("ingredient_list");
        list.innerHTML="";

        ingredients.forEach(ing => {
            let point = document.createElment("li")
            point.textContent = ing;
            point.appendChild(point);
        });
    }
</script>

{% endblock %}


