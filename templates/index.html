{% extends 'base.html' %}

{% block head %}
<title>MIXOLOGIST</title>
{% endblock %}

{% block body %}
<div class="content">
    <h1>MIXOLOGIST</h1>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class = "{{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}


    <div class ="form-container">
        <form action ="/" method ='POST'>
        <h3> Enter the name of your drink</h3>
            <label for="name"> Drink Name: </label>
            <input type ="text" name ="name" id="name" required>
                <br>
        <h3> Enter all the ingredients</h3>
            <label> Ingredients: </label>
            <div id="ingredients-list">
                <input type="text" name="ingredients[]" required>
            </div>

            <button type="button" onclick="addIngredient()"> Add Ingredient: </button>
                <br><br>
            <button type="submit"> Create Drink</button>
        </form>
    </div>

    <h2> Previous Drinks: </h2>
    {% if drinks %}
        <ul>
             {% for drink in drinks %}
                <li>
                    <strong> {{ drink.name }}</strong>
                    <ul>
                        {% for ingredient in drink.get_ingredients() %}
                            <li> {{ ingredient }}</li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p> No drinks created yet. Start mixing!</p>
    {% endif %}
</div>

<!-- JAVASCRIPT -->   
<script>
    function addIngredient() {
        let list = document.getElementById('ingredients-list');
        let inputs = list.getElementsByTagName('input');

        if (inputs.length >= 50) {
            alert("Stop. You can't add more than 50 ingredients!");
            return;
        }

        let newInput = document.createElement('input');
        newInput.type = 'text';
        newInput.name = 'ingredients[]';
        list.appendChild(newInput);     
        // Add a line break after each input!
        list.appendChild(document.createElement('br'))  
    }
</script>

{% endblock %}


